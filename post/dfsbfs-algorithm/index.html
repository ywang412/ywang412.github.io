<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" >

<title>Pitfalls in DFS and BFS algorithm | Yu&#39;s Github</title>
<meta name="description" content="Java by day, Scala by night">

<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">

<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.7.2/css/all.css" integrity="sha384-fnmOCqbTlWIlj8LyTjo7mOUStjsKC4pOpQbqyi7RrhN7udi9RwhKkMHpvLbHG9Sr" crossorigin="anonymous">
<link rel="shortcut icon" href="https://ywang412.github.io/favicon.ico?v=1561697633984">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.10.0/katex.min.css">
<link rel="stylesheet" href="https://ywang412.github.io/styles/main.css">


  

  
    <link rel="stylesheet" href="https://unpkg.com/disqusjs@1.1/dist/disqusjs.css" />
  


<script src="https://cdn.jsdelivr.net/npm/vue/dist/vue.js"></script>
<script src="https://cdn.bootcss.com/highlight.js/9.12.0/highlight.min.js"></script>

<link rel="stylesheet" href="https://unpkg.com/aos@next/dist/aos.css" />



  </head>
  <body>
    <div id="app" class="main">

      <div class="sidebar" :class="{ 'full-height': menuVisible }">
  <div class="top-container" data-aos="fade-right">
    <div class="top-header-container">
      <a class="site-title-container" href="https://ywang412.github.io">
        <img src="https://ywang412.github.io/images/avatar.png?v=1561697633984" class="site-logo">
        <h1 class="site-title">Yu&#39;s Github</h1>
      </a>
      <div class="menu-btn" @click="menuVisible = !menuVisible">
        <div class="line"></div>
      </div>
    </div>
    <div>
      
        
          <a href="/" class="site-nav">
            Home
          </a>
        
      
        
          <a href="/archives" class="site-nav">
            Archive
          </a>
        
      
        
          <a href="/tags" class="site-nav">
            Tag
          </a>
        
      
        
          <a href="/post/resume" class="site-nav">
            Resume
          </a>
        
      
    </div>
  </div>
  <div class="bottom-container" data-aos="flip-up" data-aos-offset="0">
    <div class="social-container">
      
        
          <a class="social-link" href="https://github.com/ywang412/" target="_blank">
            <i class="fab fa-github"></i>
          </a>
        
      
        
      
        
      
        
      
        
      
    </div>
    <div class="site-description">
      Java by day, Scala by night
    </div>
    <div class="site-footer">
      Powered by <a href="https://github.com/getgridea/gridea" target="_blank">Gridea</a> | <a class="rss" href="https://ywang412.github.io/atom.xml" target="_blank">RSS</a>
    </div>
  </div>
</div>


      <div class="main-container">
        <div class="content-container" data-aos="fade-up">
          <div class="post-detail">
            <h2 class="post-title">Pitfalls in DFS and BFS algorithm</h2>
            <div class="post-date">2019-06-09</div>
            
            <div class="post-content">
              <p>Some pitfalls in DFS/BFS algorithm that requires extra caution.</p>
<p><strong>Leetcode 542. 01 Matrix</strong></p>
<p>To find the shortest distance from 1 to nearest 0, It is important to truncate when current dist from a 0 is already larger than previous found dfs path originated from another 0.</p>
<pre><code>public void dfs(int[][] res, boolean[][] visited, int i, int j, int dist) {
        if (i &lt; 0 || i &gt;= res.length || j &lt; 0 || j &gt;= res[0].length || res[i][j] &lt;= dist) return;
        res[i][j] = Math.min(dist, res[i][j]);
        visited[i][j] = true;
        dfs(res, visited, i - 1, j, dist + 1);
        dfs(res, visited, i + 1, j, dist + 1);
        dfs(res, visited, i, j - 1, dist + 1);
        dfs(res, visited, i, j + 1, dist + 1); 
        visited[i][j] = false;
    }
</code></pre>
<p><strong>LeetCode 39. Combination Sum</strong>
Because of passing by reference, when adding a path to result list, the added path is a deep copy to avoid further changes. To prevent duplicated path, each dfs entry will set the minimum index of the range that following dfs can choose from.</p>
<pre><code>public void dfs(int[] candidates, int start, int cur, int target, List&lt;Integer&gt; path, List&lt;List&lt;Integer&gt;&gt; res) {
     if (cur &gt; target) return;
     if (cur == target) { 
         List&lt;Integer&gt; pathToAdd = new LinkedList&lt;&gt;(path);
         res.add(pathToAdd);
         return;
     }
     for (int i = start; i &lt; candidates.length; i++) {
         path.add(candidates[i]);
         dfs(candidates, i, cur + candidates[i], target, path, res);
         path.remove(path.size() - 1);
     }
</code></pre>
<p><strong>LeetCode 675. Cut Off Trees for Golf Event</strong>
Whenever a new position is added to the BFS queue, the visited matrix or set need to mark that as soon as possible to avoid revisiting it. Comparing string (Char of 2 bytes) is much more time consuming than comparing Integer (4 bytes).</p>
<pre><code>public int bfs(int[] pre, int[] cur, List&lt;List&lt;Integer&gt;&gt; forest) {  
		Queue&lt;int[]&gt; q = new LinkedList&lt;&gt;();
		Set&lt;String&gt; visited = new HashSet&lt;&gt;();
		pre[2] = 0;
		q.offer(pre); 
		visited.add(pre[0] + &quot;#&quot; + pre[1]);
		while (!q.isEmpty()) {   
				int[] temp = q.poll(); 
				// if ((temp[0] + &quot;#&quot; + temp[1]).equals(cur[0] + &quot;#&quot; + cur[1])) { this will cause timeout
				if ((temp[0] == cur[0]) &amp;&amp; (temp[1] == cur[1])) {
						return temp[2];
				}
				else {
						for (int[] dir : dirs) {
								int i = temp[0] + dir[0];
								int j = temp[1] + dir[1];
								if (i &gt;= 0 &amp;&amp; i &lt; forest.size() &amp;&amp; j &gt;= 0 &amp;&amp; j &lt; forest.get(i).size() &amp;&amp; forest.get(i).get(j) &gt; 0 &amp;&amp; !visited.contains(i + &quot;#&quot; + j)) {
										q.offer(new int[]{i, j, temp[2] + 1});
										visited.add(i + &quot;#&quot; + j);
								}
						}
				} 
		}
		return -1;
}
</code></pre>

            </div>
            
              <div class="tag-container">
                
                  <a href="https://ywang412.github.io/tag/fy8llECIr" class="tag">
                    LeetCode
                  </a>
                
              </div>
            
            
              <div class="next-post">
                <div class="next">下一篇</div>
                <a href="https://ywang412.github.io/post/publishing-personal-website-on-githubio-using-gridea">
                  <h3 class="post-title">
                    Publishing a personal programming blog on Github.io using Gridea
                  </h3>
                </a>
              </div>
            

            
              

              
                <div id="disqus_thread" data-aos="fade-in"></div>
              
            

          </div>

        </div>
      </div>
    </div>

    <script src="https://unpkg.com/aos@next/dist/aos.js"></script>

<script type="application/javascript">

AOS.init();

hljs.initHighlightingOnLoad()

var app = new Vue({
  el: '#app',
  data: {
    menuVisible: false,
  },
})

</script>



  

  
    <script src="https://unpkg.com/disqusjs@1.1/dist/disqus.js"></script>
    <script>

    var options = {
      shortname: 'ywang412',
      apikey: 'gmr5wORrpUmczJ0fs6x1CjNX2WgIP2riU2sSqLrIo6Idh3GkyiY8WIpUwBaP70X5',
    }
    if ('') {
      options.api = ''
    }
    var dsqjs = new DisqusJS(options)

    </script>
  




  </body>
</html>
